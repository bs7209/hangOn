<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.hangOn.repository.mapper.LobbyMapper">
	<resultMap type="room" id="roomMap">
		<result column="room_no" property="roomNo" />
		<result column="room_name" property="roomName" />
		<result column="room_create_date" property="roomCreateDate" />
		<result column="room_info" property="roomInfo" />
		<result column="room_password" property="roomPassword" />
		<result column="room_join_code" property="roomJoinCode" />
		<result column="room_del_state" property="roomDelState" />
		<result column="user_no" property="userNo" />
	</resultMap>
	
	<!-- 방 생성 -->
	<insert id="insertRoom" parameterType="room" useGeneratedKeys="true" keyProperty="roomNo">
		insert into tb_room (
			room_name, room_password, room_join_code, user_no
		) values (
			#{roomName}, #{roomPassword}, #{roomJoinCode}, 7
		)
	</insert>
	
	<!-- 난수 중복 검사 -->
	<select id="selectJoinCodeByRandomNum" parameterType="string" resultType="int">
		select count(*)
		  from tb_room
		 where room_join_code = #{roomJoinCode} 
	</select>
	
	
	<!-- 방 찾기 -->
	<select id="findRoom" parameterType="room" resultMap="roomMap">
		select *
		  from tb_room
		 where room_join_code = #{roomJoinCode}
	</select>
	
	
</mapper>